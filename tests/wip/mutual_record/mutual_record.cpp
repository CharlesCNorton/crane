#include <algorithm>
#include <any>
#include <cassert>
#include <functional>
#include <iostream>
#include <memory>
#include <mutual_record.h>
#include <optional>
#include <stdexcept>
#include <string>
#include <utility>
#include <variant>

unsigned int
MutualRecord::dept_id(const std::shared_ptr<MutualRecord::department> &d) {
  return std::visit(
      Overloaded{
          [](const typename MutualRecord::department::mk_department _args)
              -> unsigned int {
            unsigned int id = _args._a0;
            return std::move(id);
          }},
      d->v());
}

std::shared_ptr<List::list<std::shared_ptr<MutualRecord::employee>>>
MutualRecord::dept_employees(
    const std::shared_ptr<MutualRecord::department> &d) {
  return std::visit(
      Overloaded{
          [](const typename MutualRecord::department::mk_department _args)
              -> std::shared_ptr<
                  List::list<std::shared_ptr<MutualRecord::employee>>> {
            std::shared_ptr<List::list<std::shared_ptr<MutualRecord::employee>>>
                emps = _args._a1;
            return std::move(emps);
          }},
      d->v());
}

unsigned int
MutualRecord::emp_id(const std::shared_ptr<MutualRecord::employee> &e) {
  return std::visit(
      Overloaded{[](const typename MutualRecord::employee::mk_employee _args)
                     -> unsigned int {
        unsigned int id = _args._a0;
        return std::move(id);
      }},
      e->v());
}

unsigned int
MutualRecord::emp_salary(const std::shared_ptr<MutualRecord::employee> &e) {
  return std::visit(
      Overloaded{[](const typename MutualRecord::employee::mk_employee _args)
                     -> unsigned int {
        unsigned int sal = _args._a1;
        return std::move(sal);
      }},
      e->v());
}

unsigned int MutualRecord::dept_total_salary(
    const std::shared_ptr<MutualRecord::department> &d) {
  return std::visit(
      Overloaded{
          [](const typename MutualRecord::department::mk_department _args)
              -> unsigned int {
            std::shared_ptr<List::list<std::shared_ptr<MutualRecord::employee>>>
                emps = _args._a1;
            return emp_list_salary(std::move(emps));
          }},
      d->v());
}
unsigned int MutualRecord::emp_list_salary(
    const std::shared_ptr<List::list<std::shared_ptr<MutualRecord::employee>>>
        &l) {
  return std::visit(
      Overloaded{
          [](const typename List::list<
              std::shared_ptr<MutualRecord::employee>>::nil _args)
              -> unsigned int { return 0; },
          [](const typename List::list<
              std::shared_ptr<MutualRecord::employee>>::cons _args)
              -> unsigned int {
            std::shared_ptr<MutualRecord::employee> e = _args._a0;
            std::shared_ptr<List::list<std::shared_ptr<MutualRecord::employee>>>
                rest = _args._a1;
            return (emp_salary(std::move(e)) +
                    emp_list_salary(std::move(rest)));
          }},
      l->v());
}

unsigned int
MutualRecord::dept_count(const std::shared_ptr<MutualRecord::department> &d) {
  return std::visit(
      Overloaded{
          [](const typename MutualRecord::department::mk_department _args)
              -> unsigned int {
            std::shared_ptr<List::list<std::shared_ptr<MutualRecord::employee>>>
                emps = _args._a1;
            return emp_list_count(std::move(emps));
          }},
      d->v());
}
unsigned int MutualRecord::emp_list_count(
    const std::shared_ptr<List::list<std::shared_ptr<MutualRecord::employee>>>
        &l) {
  return std::visit(
      Overloaded{
          [](const typename List::list<
              std::shared_ptr<MutualRecord::employee>>::nil _args)
              -> unsigned int { return 0; },
          [](const typename List::list<
              std::shared_ptr<MutualRecord::employee>>::cons _args)
              -> unsigned int {
            std::shared_ptr<List::list<std::shared_ptr<MutualRecord::employee>>>
                rest = _args._a1;
            return ((0 + 1) + emp_list_count(std::move(rest)));
          }},
      l->v());
}
