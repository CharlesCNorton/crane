#include <algorithm>
#include <any>
#include <cassert>
#include <cstdint>
#include <functional>
#include <iostream>
#include <large_mutual.h>
#include <memory>
#include <optional>
#include <stdexcept>
#include <string>
#include <utility>
#include <variant>

unsigned int
LargeMutual::expr_size(const std::shared_ptr<LargeMutual::expr> &e) {
  return std::visit(
      Overloaded{
          [](const typename LargeMutual::expr::ENum _args) -> unsigned int {
            return (0 + 1);
          },
          [](const typename LargeMutual::expr::EVar _args) -> unsigned int {
            return (0 + 1);
          },
          [](const typename LargeMutual::expr::EAdd _args) -> unsigned int {
            std::shared_ptr<LargeMutual::expr> l = _args._a0;
            std::shared_ptr<LargeMutual::expr> r = _args._a1;
            return ((expr_size(std::move(l)) + expr_size(std::move(r))) + 1);
          },
          [](const typename LargeMutual::expr::EMul _args) -> unsigned int {
            std::shared_ptr<LargeMutual::expr> l = _args._a0;
            std::shared_ptr<LargeMutual::expr> r = _args._a1;
            return ((expr_size(std::move(l)) + expr_size(std::move(r))) + 1);
          },
          [](const typename LargeMutual::expr::ECond _args) -> unsigned int {
            std::shared_ptr<LargeMutual::bexpr> b = _args._a0;
            std::shared_ptr<LargeMutual::expr> t = _args._a1;
            std::shared_ptr<LargeMutual::expr> f = _args._a2;
            return (((bexpr_size(std::move(b)) + expr_size(std::move(t))) +
                     expr_size(std::move(f))) +
                    1);
          }},
      e->v());
}
unsigned int
LargeMutual::bexpr_size(const std::shared_ptr<LargeMutual::bexpr> &b) {
  return std::visit(
      Overloaded{
          [](const typename LargeMutual::bexpr::BTrue _args) -> unsigned int {
            return (0 + 1);
          },
          [](const typename LargeMutual::bexpr::BFalse _args) -> unsigned int {
            return (0 + 1);
          },
          [](const typename LargeMutual::bexpr::BEq _args) -> unsigned int {
            std::shared_ptr<LargeMutual::expr> l = _args._a0;
            std::shared_ptr<LargeMutual::expr> r = _args._a1;
            return ((expr_size(std::move(l)) + expr_size(std::move(r))) + 1);
          },
          [](const typename LargeMutual::bexpr::BLt _args) -> unsigned int {
            std::shared_ptr<LargeMutual::expr> l = _args._a0;
            std::shared_ptr<LargeMutual::expr> r = _args._a1;
            return ((expr_size(std::move(l)) + expr_size(std::move(r))) + 1);
          },
          [](const typename LargeMutual::bexpr::BAnd _args) -> unsigned int {
            std::shared_ptr<LargeMutual::bexpr> l = _args._a0;
            std::shared_ptr<LargeMutual::bexpr> r = _args._a1;
            return ((bexpr_size(std::move(l)) + bexpr_size(std::move(r))) + 1);
          },
          [](const typename LargeMutual::bexpr::BOr _args) -> unsigned int {
            std::shared_ptr<LargeMutual::bexpr> l = _args._a0;
            std::shared_ptr<LargeMutual::bexpr> r = _args._a1;
            return ((bexpr_size(std::move(l)) + bexpr_size(std::move(r))) + 1);
          },
          [](const typename LargeMutual::bexpr::BNot _args) -> unsigned int {
            std::shared_ptr<LargeMutual::bexpr> b0 = _args._a0;
            return (bexpr_size(std::move(b0)) + 1);
          }},
      b->v());
}

unsigned int
LargeMutual::stmt_size(const std::shared_ptr<LargeMutual::stmt> &s) {
  return std::visit(
      Overloaded{
          [](const typename LargeMutual::stmt::SAssign _args) -> unsigned int {
            std::shared_ptr<LargeMutual::expr> e = _args._a1;
            return (expr_size(std::move(e)) + 1);
          },
          [](const typename LargeMutual::stmt::SSeq _args) -> unsigned int {
            std::shared_ptr<LargeMutual::stmt> s1 = _args._a0;
            std::shared_ptr<LargeMutual::stmt> s2 = _args._a1;
            return ((stmt_size(std::move(s1)) + stmt_size(std::move(s2))) + 1);
          },
          [](const typename LargeMutual::stmt::SIf _args) -> unsigned int {
            std::shared_ptr<LargeMutual::bexpr> b = _args._a0;
            std::shared_ptr<LargeMutual::stmt> s1 = _args._a1;
            std::shared_ptr<LargeMutual::stmt> s2 = _args._a2;
            return (((bexpr_size(std::move(b)) + stmt_size(std::move(s1))) +
                     stmt_size(std::move(s2))) +
                    1);
          },
          [](const typename LargeMutual::stmt::SWhile _args) -> unsigned int {
            std::shared_ptr<LargeMutual::bexpr> b = _args._a0;
            std::shared_ptr<LargeMutual::stmt> body = _args._a1;
            return ((bexpr_size(std::move(b)) + stmt_size(std::move(body))) +
                    1);
          },
          [](const typename LargeMutual::stmt::SSkip _args) -> unsigned int {
            return (0 + 1);
          }},
      s->v());
}
