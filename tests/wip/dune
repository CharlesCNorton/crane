(include_subdirs qualified)

(env (_ (env-vars (INSIDE_DUNE "1"))))

(coq.theory
 (name CraneTestsWIP)
 (synopsis "Tests for the rocq-crane plugin")
 (modules :standard) ; automatically includes all .v files in this directory
 (theories
   Stdlib
   Crane
   Equations)
 (flags (:standard -output-directory ../../tests/wip)))

(subdir graph
 (rule
  (targets graph.t.exe)
  (deps Graph.vo graph.t.cpp (source_tree .))
  (action
   (run %{project_root}/scripts/compile-std.sh %{project_root} graph.t.exe graph.cpp graph.t.cpp)))
 (rule
  (alias runtest)
  (deps graph.t.exe)
  (action (run ./graph.t.exe))))

(subdir ind_param
 (rule
  (targets ind_param.t.exe)
  (deps IndParam.vo ind_param.t.cpp (source_tree .))
  (action
   (run %{project_root}/scripts/compile-std.sh %{project_root} ind_param.t.exe ind_param.cpp ind_param.t.cpp)))
 (rule
  (alias runtest)
  (deps ind_param.t.exe)
  (action (run ./ind_param.t.exe))))

(subdir isort
 (rule
  (targets isort.t.exe)
  (deps Sort.vo isort.t.cpp (source_tree .))
  (action
   (run %{project_root}/scripts/compile-std.sh %{project_root} isort.t.exe isort.cpp isort.t.cpp)))
 (rule
  (alias runtest)
  (deps isort.t.exe)
  (action (run ./isort.t.exe))))

(subdir levenshtein
 (rule
  (targets levenshtein.t.exe)
  (deps Levenshtein.vo levenshtein.t.cpp (source_tree .))
  (action
   (run %{project_root}/scripts/compile-std.sh %{project_root} levenshtein.t.exe levenshtein.cpp levenshtein.t.cpp)))
 (rule
  (alias runtest)
  (deps levenshtein.t.exe)
  (action (run ./levenshtein.t.exe))))

(subdir msort
 (rule
  (targets msort.t.exe)
  (deps Sort.vo msort.t.cpp (source_tree .))
  (action
   (run %{project_root}/scripts/compile-std.sh %{project_root} msort.t.exe msort.cpp msort.t.cpp)))
 (rule
  (alias runtest)
  (deps msort.t.exe)
  (action (run ./msort.t.exe))))

(subdir equations
 (rule
  (targets equations.t.exe)
  (deps Equations.vo equations.t.cpp (source_tree .))
  (action
   (run %{project_root}/scripts/compile-std.sh %{project_root} equations.t.exe equations.cpp equations.t.cpp)))
 (rule
  (alias runtest)
  (deps equations.t.exe)
  (action (run ./equations.t.exe))))

(subdir program_fixpoint
 (rule
  (targets program_fixpoint.t.exe)
  (deps ProgFix.vo program_fixpoint.t.cpp (source_tree .))
  (action
   (run %{project_root}/scripts/compile-std.sh %{project_root} program_fixpoint.t.exe program_fixpoint.cpp program_fixpoint.t.cpp)))
 (rule
  (alias runtest)
  (deps program_fixpoint.t.exe)
  (action (run ./program_fixpoint.t.exe))))

(subdir prim_proj
 (rule
  (targets prim_proj.t.exe)
  (deps PrimProj.vo prim_proj.t.cpp (source_tree .))
  (action
   (run %{project_root}/scripts/compile-std.sh %{project_root} prim_proj.t.exe prim_proj.cpp prim_proj.t.cpp)))
 (rule
  (alias runtest)
  (deps prim_proj.t.exe)
  (action (run ./prim_proj.t.exe))))

(subdir canon_struct
 (rule
  (targets canon_struct.t.exe)
  (deps CanonStruct.vo canon_struct.t.cpp (source_tree .))
  (action
   (run %{project_root}/scripts/compile-std.sh %{project_root} canon_struct.t.exe canon_struct.cpp canon_struct.t.cpp)))
 (rule
  (alias runtest)
  (deps canon_struct.t.exe)
  (action (run ./canon_struct.t.exe))))
(subdir nested_mod
 (rule
  (targets nested_mod.t.exe)
  (deps NestedMod.vo nested_mod.t.cpp (source_tree .))
  (action
   (run %{project_root}/scripts/compile-std.sh %{project_root} nested_mod.t.exe nested_mod.cpp nested_mod.t.cpp)))
 (rule
  (alias runtest)
  (deps nested_mod.t.exe)
  (action (run ./nested_mod.t.exe))))

(subdir psort
 (rule
  (targets psort.t.exe)
  (deps Sort.vo psort.t.cpp (source_tree .))
  (action
   (run %{project_root}/scripts/compile-std.sh %{project_root} psort.t.exe psort.cpp psort.t.cpp)))
 (rule
  (alias runtest)
  (deps psort.t.exe)
  (action (run ./psort.t.exe))))

(subdir qsort
 (rule
  (targets qsort.t.exe)
  (deps Sort.vo qsort.t.cpp (source_tree .))
  (action
   (run %{project_root}/scripts/compile-std.sh %{project_root} qsort.t.exe qsort.cpp qsort.t.cpp)))
 (rule
  (alias runtest)
  (deps qsort.t.exe)
  (action (run ./qsort.t.exe))))

(subdir vec
 (rule
  (targets vec.t.exe)
  (deps Vec.vo vec.t.cpp (source_tree .))
  (action
   (run %{project_root}/scripts/compile-std.sh %{project_root} vec.t.exe vec.cpp vec.t.cpp)))
 (rule
  (alias runtest)
  (deps vec.t.exe)
  (action (run ./vec.t.exe))))

(subdir mutual_recursion
 (rule
  (targets mutual_recursion.t.exe)
  (deps MutualRecursion.vo mutual_recursion.t.cpp (source_tree .))
  (action
   (run %{project_root}/scripts/compile-std.sh %{project_root} mutual_recursion.t.exe mutual_recursion.cpp mutual_recursion.t.cpp)))
 (rule
  (alias runtest)
  (deps mutual_recursion.t.exe)
  (action (run ./mutual_recursion.t.exe))))

(subdir sections
 (rule
  (targets sections.t.exe)
  (deps Sections.vo sections.t.cpp (source_tree .))
  (action
   (run %{project_root}/scripts/compile-std.sh %{project_root} sections.t.exe sections.cpp sections.t.cpp)))
 (rule
  (alias runtest)
  (deps sections.t.exe)
  (action (run ./sections.t.exe))))

(subdir singleton_record
 (rule
  (targets singleton_record.t.exe)
  (deps SingletonRecord.vo singleton_record.t.cpp (source_tree .))
  (action
   (run %{project_root}/scripts/compile-std.sh %{project_root} singleton_record.t.exe singleton_record.cpp singleton_record.t.cpp)))
 (rule
  (alias runtest)
  (deps singleton_record.t.exe)
  (action (run ./singleton_record.t.exe))))

(subdir cotree
 (rule
  (targets cotree.t.exe)
  (deps Cotree.vo cotree.t.cpp (source_tree .))
  (action
   (run %{project_root}/scripts/compile-std.sh %{project_root} cotree.t.exe cotree.cpp cotree.t.cpp)))
 (rule
  (alias runtest)
  (deps cotree.t.exe)
  (action (run ./cotree.t.exe))))

(subdir nested_ind
 (rule
  (targets nested_ind.t.exe)
  (deps NestedInd.vo nested_ind.t.cpp (source_tree .))
  (action
   (run %{project_root}/scripts/compile-std.sh %{project_root} nested_ind.t.exe nested_ind.cpp nested_ind.t.cpp)))
 (rule
  (alias runtest)
  (deps nested_ind.t.exe)
  (action (run ./nested_ind.t.exe))))

(subdir typeclasses
 (rule
  (targets typeclasses.t.exe)
  (deps Typeclasses.vo typeclasses.t.cpp (source_tree .))
  (action
   (run %{project_root}/scripts/compile-std.sh %{project_root} typeclasses.t.exe typeclasses.cpp typeclasses.t.cpp)))
 (rule
  (alias runtest)
  (deps typeclasses.t.exe)
  (action (run ./typeclasses.t.exe))))

(subdir binary_nums
 (rule
  (targets binary_nums.t.exe)
  (deps BinaryNums.vo binary_nums.t.cpp (source_tree .))
  (action
   (run %{project_root}/scripts/compile-std.sh %{project_root} binary_nums.t.exe binary_nums.cpp binary_nums.t.cpp)))
 (rule
  (alias runtest)
  (deps binary_nums.t.exe)
  (action (run ./binary_nums.t.exe))))

(subdir int63_arith
 (rule
  (targets int63_arith.t.exe)
  (deps Int63Arith.vo int63_arith.t.cpp (source_tree .))
  (action
   (run %{project_root}/scripts/compile-std.sh %{project_root} int63_arith.t.exe int63_arith.cpp int63_arith.t.cpp)))
 (rule
  (alias runtest)
  (deps int63_arith.t.exe)
  (action (run ./int63_arith.t.exe))))

(subdir coercions
 (rule
  (targets coercions.t.exe)
  (deps Coercions.vo coercions.t.cpp (source_tree .))
  (action
   (run %{project_root}/scripts/compile-std.sh %{project_root} coercions.t.exe coercions.cpp coercions.t.cpp)))
 (rule
  (alias runtest)
  (deps coercions.t.exe)
  (action (run ./coercions.t.exe))))

(subdir universe_poly
 (rule
  (targets universe_poly.t.exe)
  (deps UniversePoly.vo universe_poly.t.cpp (source_tree .))
  (action
   (run %{project_root}/scripts/compile-std.sh %{project_root} universe_poly.t.exe universe_poly.cpp universe_poly.t.cpp)))
 (rule
  (alias runtest)
  (deps universe_poly.t.exe)
  (action (run ./universe_poly.t.exe))))

(subdir mutual_coind
 (rule
  (targets mutual_coind.t.exe)
  (deps MutualCoind.vo mutual_coind.t.cpp (source_tree .))
  (action
   (run %{project_root}/scripts/compile-std.sh %{project_root} mutual_coind.t.exe mutual_coind.cpp mutual_coind.t.cpp)))
 (rule
  (alias runtest)
  (deps mutual_coind.t.exe)
  (action (run ./mutual_coind.t.exe))))

(subdir large_enum
 (rule
  (targets large_enum.t.exe)
  (deps LargeEnum.vo large_enum.t.cpp (source_tree .))
  (action
   (run %{project_root}/scripts/compile-std.sh %{project_root} large_enum.t.exe large_enum.cpp large_enum.t.cpp)))
 (rule
  (alias runtest)
  (deps large_enum.t.exe)
  (action (run ./large_enum.t.exe))))

(subdir dep_elim
 (rule
  (targets dep_elim.t.exe)
  (deps DepElim.vo dep_elim.t.cpp (source_tree .))
  (action
   (run %{project_root}/scripts/compile-std.sh %{project_root} dep_elim.t.exe dep_elim.cpp dep_elim.t.cpp)))
 (rule
  (alias runtest)
  (deps dep_elim.t.exe)
  (action (run ./dep_elim.t.exe))))

(subdir opaque
 (rule
  (targets opaque.t.exe)
  (deps Opaque.vo opaque.t.cpp (source_tree .))
  (action
   (run %{project_root}/scripts/compile-std.sh %{project_root} opaque.t.exe opaque.cpp opaque.t.cpp)))
 (rule
  (alias runtest)
  (deps opaque.t.exe)
  (action (run ./opaque.t.exe))))

(subdir poly_inductive
 (rule
  (targets poly_inductive.t.exe)
  (deps PolyInductive.vo poly_inductive.t.cpp (source_tree .))
  (action
   (run %{project_root}/scripts/compile-std.sh %{project_root} poly_inductive.t.exe poly_inductive.cpp poly_inductive.t.cpp)))
 (rule
  (alias runtest)
  (deps poly_inductive.t.exe)
  (action (run ./poly_inductive.t.exe))))

(subdir prim_rec_tc
 (rule
  (targets prim_rec_tc.t.exe)
  (deps PrimRecTc.vo prim_rec_tc.t.cpp (source_tree .))
  (action
   (run %{project_root}/scripts/compile-std.sh %{project_root} prim_rec_tc.t.exe prim_rec_tc.cpp prim_rec_tc.t.cpp)))
 (rule
  (alias runtest)
  (deps prim_rec_tc.t.exe)
  (action (run ./prim_rec_tc.t.exe))))
