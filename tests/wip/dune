(include_subdirs qualified)

(env (_ (env-vars (INSIDE_DUNE "1"))))

(coq.theory
 (name CraneTestsWIP)
 (synopsis "Tests for the rocq-crane plugin")
 (modules :standard) ; automatically includes all .v files in this directory
 (theories
   Stdlib
   Crane
   Equations)
 (flags (:standard -output-directory ../../tests/wip)))

(subdir graph
 (rule
  (targets graph.t.exe)
  (deps Graph.vo graph.t.cpp (source_tree .))
  (action
   (run %{project_root}/scripts/compile-std.sh %{project_root} graph.t.exe graph.cpp graph.t.cpp)))
 (rule
  (alias runtest)
  (deps graph.t.exe)
  (action (run ./graph.t.exe))))

(subdir ind_param
 (rule
  (targets ind_param.t.exe)
  (deps IndParam.vo ind_param.t.cpp (source_tree .))
  (action
   (run %{project_root}/scripts/compile-std.sh %{project_root} ind_param.t.exe ind_param.cpp ind_param.t.cpp)))
 (rule
  (alias runtest)
  (deps ind_param.t.exe)
  (action (run ./ind_param.t.exe))))

(subdir isort
 (rule
  (targets isort.t.exe)
  (deps Sort.vo isort.t.cpp (source_tree .))
  (action
   (run %{project_root}/scripts/compile-std.sh %{project_root} isort.t.exe isort.cpp isort.t.cpp)))
 (rule
  (alias runtest)
  (deps isort.t.exe)
  (action (run ./isort.t.exe))))

(subdir levenshtein
 (rule
  (targets levenshtein.t.exe)
  (deps Levenshtein.vo levenshtein.t.cpp (source_tree .))
  (action
   (run %{project_root}/scripts/compile-std.sh %{project_root} levenshtein.t.exe levenshtein.cpp levenshtein.t.cpp)))
 (rule
  (alias runtest)
  (deps levenshtein.t.exe)
  (action (run ./levenshtein.t.exe))))

(subdir msort
 (rule
  (targets msort.t.exe)
  (deps Sort.vo msort.t.cpp (source_tree .))
  (action
   (run %{project_root}/scripts/compile-std.sh %{project_root} msort.t.exe msort.cpp msort.t.cpp)))
 (rule
  (alias runtest)
  (deps msort.t.exe)
  (action (run ./msort.t.exe))))

(subdir equations
 (rule
  (targets equations.t.exe)
  (deps Equations.vo equations.t.cpp (source_tree .))
  (action
   (run %{project_root}/scripts/compile-std.sh %{project_root} equations.t.exe equations.cpp equations.t.cpp)))
 (rule
  (alias runtest)
  (deps equations.t.exe)
  (action (run ./equations.t.exe))))

(subdir program_fixpoint
 (rule
  (targets program_fixpoint.t.exe)
  (deps ProgFix.vo program_fixpoint.t.cpp (source_tree .))
  (action
   (run %{project_root}/scripts/compile-std.sh %{project_root} program_fixpoint.t.exe program_fixpoint.cpp program_fixpoint.t.cpp)))
 (rule
  (alias runtest)
  (deps program_fixpoint.t.exe)
  (action (run ./program_fixpoint.t.exe))))

(subdir canon_struct
 (rule
  (targets canon_struct.t.exe)
  (deps CanonStruct.vo canon_struct.t.cpp (source_tree .))
  (action
   (run %{project_root}/scripts/compile-std.sh %{project_root} canon_struct.t.exe canon_struct.cpp canon_struct.t.cpp)))
 (rule
  (alias runtest)
  (deps canon_struct.t.exe)
  (action (run ./canon_struct.t.exe))))

(subdir psort
 (rule
  (targets psort.t.exe)
  (deps Sort.vo psort.t.cpp (source_tree .))
  (action
   (run %{project_root}/scripts/compile-std.sh %{project_root} psort.t.exe psort.cpp psort.t.cpp)))
 (rule
  (alias runtest)
  (deps psort.t.exe)
  (action (run ./psort.t.exe))))

(subdir qsort
 (rule
  (targets qsort.t.exe)
  (deps Sort.vo qsort.t.cpp (source_tree .))
  (action
   (run %{project_root}/scripts/compile-std.sh %{project_root} qsort.t.exe qsort.cpp qsort.t.cpp)))
 (rule
  (alias runtest)
  (deps qsort.t.exe)
  (action (run ./qsort.t.exe))))

(subdir vec
 (rule
  (targets vec.t.exe)
  (deps Vec.vo vec.t.cpp (source_tree .))
  (action
   (run %{project_root}/scripts/compile-std.sh %{project_root} vec.t.exe vec.cpp vec.t.cpp)))
 (rule
  (alias runtest)
  (deps vec.t.exe)
  (action (run ./vec.t.exe))))

(subdir sections
 (rule
  (targets sections.t.exe)
  (deps Sections.vo sections.t.cpp (source_tree .))
  (action
   (run %{project_root}/scripts/compile-std.sh %{project_root} sections.t.exe sections.cpp sections.t.cpp)))
 (rule
  (alias runtest)
  (deps sections.t.exe)
  (action (run ./sections.t.exe))))

(subdir singleton_record
 (rule
  (targets singleton_record.t.exe)
  (deps SingletonRecord.vo singleton_record.t.cpp (source_tree .))
  (action
   (run %{project_root}/scripts/compile-std.sh %{project_root} singleton_record.t.exe singleton_record.cpp singleton_record.t.cpp)))
 (rule
  (alias runtest)
  (deps singleton_record.t.exe)
  (action (run ./singleton_record.t.exe))))

(subdir cotree
 (rule
  (targets cotree.t.exe)
  (deps Cotree.vo cotree.t.cpp (source_tree .))
  (action
   (run %{project_root}/scripts/compile-std.sh %{project_root} cotree.t.exe cotree.cpp cotree.t.cpp)))
 (rule
  (alias runtest)
  (deps cotree.t.exe)
  (action (run ./cotree.t.exe))))

(subdir typeclasses
 (rule
  (targets typeclasses.t.exe)
  (deps Typeclasses.vo typeclasses.t.cpp (source_tree .))
  (action
   (run %{project_root}/scripts/compile-std.sh %{project_root} typeclasses.t.exe typeclasses.cpp typeclasses.t.cpp)))
 (rule
  (alias runtest)
  (deps typeclasses.t.exe)
  (action (run ./typeclasses.t.exe))))

(subdir binary_nums
 (rule
  (targets binary_nums.t.exe)
  (deps BinaryNums.vo binary_nums.t.cpp (source_tree .))
  (action
   (run %{project_root}/scripts/compile-std.sh %{project_root} binary_nums.t.exe binary_nums.cpp binary_nums.t.cpp)))
 (rule
  (alias runtest)
  (deps binary_nums.t.exe)
  (action (run ./binary_nums.t.exe))))

(subdir int63_arith
 (rule
  (targets int63_arith.t.exe)
  (deps Int63Arith.vo int63_arith.t.cpp (source_tree .))
  (action
   (run %{project_root}/scripts/compile-std.sh %{project_root} int63_arith.t.exe int63_arith.cpp int63_arith.t.cpp)))
 (rule
  (alias runtest)
  (deps int63_arith.t.exe)
  (action (run ./int63_arith.t.exe))))

(subdir coercions
 (rule
  (targets coercions.t.exe)
  (deps Coercions.vo coercions.t.cpp (source_tree .))
  (action
   (run %{project_root}/scripts/compile-std.sh %{project_root} coercions.t.exe coercions.cpp coercions.t.cpp)))
 (rule
  (alias runtest)
  (deps coercions.t.exe)
  (action (run ./coercions.t.exe))))

(subdir mutual_coind
 (rule
  (targets mutual_coind.t.exe)
  (deps MutualCoind.vo mutual_coind.t.cpp (source_tree .))
  (action
   (run %{project_root}/scripts/compile-std.sh %{project_root} mutual_coind.t.exe mutual_coind.cpp mutual_coind.t.cpp)))
 (rule
  (alias runtest)
  (deps mutual_coind.t.exe)
  (action (run ./mutual_coind.t.exe))))


(subdir dep_elim
 (rule
  (targets dep_elim.t.exe)
  (deps DepElim.vo dep_elim.t.cpp (source_tree .))
  (action
   (run %{project_root}/scripts/compile-std.sh %{project_root} dep_elim.t.exe dep_elim.cpp dep_elim.t.cpp)))
 (rule
  (alias runtest)
  (deps dep_elim.t.exe)
  (action (run ./dep_elim.t.exe))))

(subdir opaque
 (rule
  (targets opaque.t.exe)
  (deps Opaque.vo opaque.t.cpp (source_tree .))
  (action
   (run %{project_root}/scripts/compile-std.sh %{project_root} opaque.t.exe opaque.cpp opaque.t.cpp)))
 (rule
  (alias runtest)
  (deps opaque.t.exe)
  (action (run ./opaque.t.exe))))

(subdir dep_record
 (rule
  (targets dep_record.t.exe)
  (deps DepRecord.vo dep_record.t.cpp (source_tree .))
  (action
   (run %{project_root}/scripts/compile-std.sh %{project_root} dep_record.t.exe dep_record.cpp dep_record.t.cpp)))
 (rule
  (alias runtest)
  (deps dep_record.t.exe)
  (action (run ./dep_record.t.exe))))

(subdir higher_kinded
 (rule
  (targets higher_kinded.t.exe)
  (deps HigherKinded.vo higher_kinded.t.cpp (source_tree .))
  (action
   (run %{project_root}/scripts/compile-std.sh %{project_root} higher_kinded.t.exe higher_kinded.cpp higher_kinded.t.cpp)))
 (rule
  (alias runtest)
  (deps higher_kinded.t.exe)
  (action (run ./higher_kinded.t.exe))))


(subdir rec_record
 (rule
  (targets rec_record.t.exe)
  (deps RecRecord.vo rec_record.t.cpp (source_tree .))
  (action
   (run %{project_root}/scripts/compile-std.sh %{project_root} rec_record.t.exe rec_record.cpp rec_record.t.cpp)))
 (rule
  (alias runtest)
  (deps rec_record.t.exe)
  (action (run ./rec_record.t.exe))))

(subdir string_match
 (rule
  (targets string_match.t.exe)
  (deps StringMatch.vo string_match.t.cpp (source_tree .))
  (action
   (run %{project_root}/scripts/compile-std.sh %{project_root} string_match.t.exe string_match.cpp string_match.t.cpp)))
 (rule
  (alias runtest)
  (deps string_match.t.exe)
  (action (run ./string_match.t.exe))))

(subdir closures_in_data
 (rule
  (targets closures_in_data.t.exe)
  (deps ClosuresInData.vo closures_in_data.t.cpp (source_tree .))
  (action
   (run %{project_root}/scripts/compile-std.sh %{project_root} closures_in_data.t.exe closures_in_data.cpp closures_in_data.t.cpp)))
 (rule
  (alias runtest)
  (deps closures_in_data.t.exe)
  (action (run ./closures_in_data.t.exe))))

(subdir coind_guard
 (rule
  (targets coind_guard.t.exe)
  (deps CoindGuard.vo coind_guard.t.cpp (source_tree .))
  (action
   (run %{project_root}/scripts/compile-std.sh %{project_root} coind_guard.t.exe coind_guard.cpp coind_guard.t.cpp)))
 (rule
  (alias runtest)
  (deps coind_guard.t.exe)
  (action (run ./coind_guard.t.exe))))


(subdir cps
 (rule
  (targets cps.t.exe)
  (deps CPS.vo cps.t.cpp (source_tree .))
  (action
   (run %{project_root}/scripts/compile-std.sh %{project_root} cps.t.exe cps.cpp cps.t.cpp)))
 (rule
  (alias runtest)
  (deps cps.t.exe)
  (action (run ./cps.t.exe))))


(subdir functor_comp
 (rule
  (targets functor_comp.t.exe)
  (deps FunctorComp.vo functor_comp.t.cpp (source_tree .))
  (action
   (run %{project_root}/scripts/compile-std.sh %{project_root} functor_comp.t.exe functor_comp.cpp functor_comp.t.cpp)))
 (rule
  (alias runtest)
  (deps functor_comp.t.exe)
  (action (run ./functor_comp.t.exe))))

(subdir monadic
 (rule
  (targets monadic.t.exe)
  (deps Monadic.vo monadic.t.cpp (source_tree .))
  (action
   (run %{project_root}/scripts/compile-std.sh %{project_root} monadic.t.exe monadic.cpp monadic.t.cpp)))
 (rule
  (alias runtest)
  (deps monadic.t.exe)
  (action (run ./monadic.t.exe))))

(subdir mutual_indexed
 (rule
  (targets mutual_indexed.t.exe)
  (deps MutualIndexed.vo mutual_indexed.t.cpp (source_tree .))
  (action
   (run %{project_root}/scripts/compile-std.sh %{project_root} mutual_indexed.t.exe mutual_indexed.cpp mutual_indexed.t.cpp)))
 (rule
  (alias runtest)
  (deps mutual_indexed.t.exe)
  (action (run ./mutual_indexed.t.exe))))

(subdir partial_apply
 (rule
  (targets partial_apply.t.exe)
  (deps PartialApply.vo partial_apply.t.cpp (source_tree .))
  (action
   (run %{project_root}/scripts/compile-std.sh %{project_root} partial_apply.t.exe partial_apply.cpp partial_apply.t.cpp)))
 (rule
  (alias runtest)
  (deps partial_apply.t.exe)
  (action (run ./partial_apply.t.exe))))

(subdir poly_inductive
 (rule
  (targets poly_inductive.t.exe)
  (deps PolyInductive.vo poly_inductive.t.cpp (source_tree .))
  (action
   (run %{project_root}/scripts/compile-std.sh %{project_root} poly_inductive.t.exe poly_inductive.cpp poly_inductive.t.cpp)))
 (rule
  (alias runtest)
  (deps poly_inductive.t.exe)
  (action (run ./poly_inductive.t.exe))))

(subdir sigma_compute
 (rule
  (targets sigma_compute.t.exe)
  (deps SigmaCompute.vo sigma_compute.t.cpp (source_tree .))
  (action
   (run %{project_root}/scripts/compile-std.sh %{project_root} sigma_compute.t.exe sigma_compute.cpp sigma_compute.t.cpp)))
 (rule
  (alias runtest)
  (deps sigma_compute.t.exe)
  (action (run ./sigma_compute.t.exe))))

